# 中兴ZXV10 B863AV3.2-T 刷机与ADB开启终极指南

本文档详细介绍了中兴ZXV10 B863AV3.2-T机顶盒（高安版）的刷机流程、ADB调试的特殊开启方法、系统定制及已知Bug的解决方案。

**重要提示：** 本机型为高安版，**不可通用**S905L3A_B的刷机包。

## 一、 系统优化建议

*   **桌面选择：** **强烈建议避免使用Emotn桌面**。尽管其内存占用看起来不高，但会持续占用15%~25%的CPU资源。推荐使用 **Atv Launcher (ca.dstudio.atvlauncher.free)**，其CPU占用几乎为零。
*   **恢复出厂设置密码：** `10000` 或 `6321`
*   **恢复出厂设置：** 密码为 `10086`

---

## 二、 开启 ADB 调试（绕过限制）

由于该设备限制了USB调试的永久开启，我们需要通过特定方法绕过限制。

### 1. 临时开启方法

1.  **安装工具箱：** 安装 **爱玩机工具箱**（可不联网），进入软件后执行“开启USB调试”。
2.  **卸载工具箱：** 此时可以卸载该工具箱。
3.  **设置持久化命令：** 执行以下ADB命令，可使USB调试在重启后**再次开启500次**，无需密码：
    ```bash
    adb shell settings put global adb_num AMM
    ```
    **注意：** 每次执行该命令，`adb_num` 的值（如 `AMM`, `AMC`, `AMB` 等）都会变化。在500次限制用完前，可再次执行此命令以刷新次数。

### 2. ADB 权限与常用命令

一旦USB调试开启，ADB连接后即具有 **Root权限**，可以进行系统应用禁用和卸载操作。

**常用系统设置查询/修改命令：**
```bash
# 列出所有设置项（可结合 grep 搜索特定内容）
adb shell settings list system/global/secure 

# 修改全局设置 (例如：adb_enable 1)
adb shell settings put global adb_enable 1 
```

---

## 三、 系统定制与刷机流程

### 1. 制作刷机包（修改系统文件）

1.  使用 **Mik** 工具解包 `img` 线刷文件包，获取 `system`, `boot`, `vendor`, `product` 等分区镜像文件。
2.  解包 `system.img`，对 `/system/app` 或 `/system/priv-app` 下的文件进行修改（如替换应用）。
3.  修改完成后，使用 Mik 工具将分区文件重新打包为线刷用的 `img` 文件。

### 2. 刷机操作（使用 Amlogic 软件）

**警告：** 刷机过程中，**不要勾选清除选项**，否则会导致设备的三码信息丢失。

1.  **准备工作：** 拆开机顶盒外壳。
2.  **进入刷机模式：** 连接电源（暂不开机）。**持续短接 C79A8 焊点**（通常是主板上的特定测试点），然后连接USB线到电脑。
3.  **软件识别：** 打开 **Amlogic 刷机软件**，软件识别到设备后，点击“刷入”。
4.  **松开短接点：** 当刷机进度到达 **“格式化”** 阶段时，可以松开短接点。
5.  **完成：** 刷机提示成功后，关闭软件，断开USB线，拔掉电源。重新装好外壳，连接电视即可。

---

## 四、 系统应用管理与调整

### 1. 应用删除（需先开启ADB）

连接ADB后（确保 `adb_num` 已激活）：
```bash
adb connect 192.168.x.x  # 替换为设备的IP地址
adb shell settings put global adb_num AMM  # 刷新ADB权限
```

**可安全禁用的系统应用列表：**
```bash
adb shell pm disable com.ztestb.javawatch
adb shell pm disable com.droidlogic
adb shell pm disable com.zte.netmanager
adb shell pm disable com.ztestb.authconfig
adb shell pm disable com.zte.factorytesttool
```

**不可删除的应用（删除会导致系统异常）：**
*   `com.zte.android.productcfg`：删除后可能无法进入桌面（可进设置）。
*   `com.zte.basecomp`：删除后无法进入设置界面。
*   `com.stbmc.maincontrol`：删除后无法恢复出厂设置，也无法通过连按遥控器左键进入Recovery模式。

### 2. 输入法更换

*   **问题：** 自带输入法在鼠标选字时存在Bug。
*   **解决方案：** 替换为 **B863AV3.2M** 包中的输入法 **RemoteIME**。将其放入 `/vendor/app/RemoteIME` 文件夹，并将相关库文件（lib文件）放入 `/lib` 文件夹。

### 3. 进阶操作 (需Root权限)

*   **ADB 截屏：**
    ```bash
    screencap -j sdcard/download/1.jpg
    ```
*   **ADB 录屏 (1280x720, 3Mbps, 60秒限制)：**
    ```bash
    screenrecord --size 1280x720 --bit-rate 3000000 --time-limit 60 sdcard/download/test.mp4
    ```
*   **打开指定Activity：**
    *   **回到主屏幕（ZTE专用）：** `am start -n com.zte.android.productcfg/.FallbackHome`
    *   **打开高级设置菜单：** `am start -n com.android.settings/.settingsfjyd.SettingsMain`
*   **查看内存占用：** `cat /proc/meminfo` 或 `adb shell dumpsys meminfo` (可指定进程PID)

---

## 五、 恢复模式 (Recovery)

1.  **ADB 重启：** `adb reboot recovery` (如果系统正常)
2.  **手动进入：** 在开机过程中，**连续快速按遥控器左键**，即可进入Recovery界面，用于执行恢复出厂设置。

---

## 六、 已知 Bug 及解决方案

| 编号 | 问题描述                                | 解决方案/说明                                                                                                                                                                    |
| :--- | :-------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | 所有版本的 Kodi 应用均闪退。            | 需修改 `boot` 分区方可解决，目前无简便方法。                                                                                                                                     |
| 2    | 无法自动获取 IPv6 地址。                | **临时解决：** 进入高级设置 (`com.android.settings/.settingsfjyd.SettingsMain`)，找到有线网络设置，手动切换为 **“IPv4/IPv6”** 模式。 **注意：** 一旦恢复出厂设置，此设置将丢失。 |
| 3    | 按 Home 键（桌面键）无反应。            | 只能通过持续按 **返回键** 才能回到主屏。                                                                                                                                         |
| 4    | 蓝牙 4.0 音频延迟严重。                 | 音频滞后约 300~400ms，人耳感知明显，硬件限制。                                                                                                                                   |
| 5    | 自带 DLNA 和 Miracast 投屏功能不可用。  | 可使用 **QPlayer (cn.blapp.mplayer)** 实现 DLNA 投屏功能。                                                                                                                       |
| 6    | 设备仅支持百兆有线网络，无 Wi-Fi 功能。 | 硬件限制。                                                                                                                                                                       |